{
  "info": {
    "_postman_id": "a73a5a49-be6a-434a-89b4-675a05dbec9c",
    "name": "Tests API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "52215072",
    "_collection_link": "https://go.postman.co/collection/52215072-a73a5a49-be6a-434a-89b4-675a05dbec9c?source=collection_link"
  },
  "item": [
    {
      "name": "Create Projects",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// Validate successful creation\r",
              "pm.test(\"Status code is 201\", () => {\r",
              "    pm.response.to.have.status(201);\r",
              "});\r",
              "\r",
              "// Save ID for next tests and validate structure\r",
              "pm.test(\"Response contains ID and saves to environment\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json).to.have.property(\"id\");\r",
              "    // This saves the ID dynamically so other tests can use it\r",
              "    pm.environment.set(\"project_id\", json.id);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\": \"API Tests\",\r\n    \"description\": \"Tests API CREATION\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://127.0.0.1:8000/api/projects/",
          "protocol": "http",
          "host": [
            "127",
            "0",
            "0",
            "1"
          ],
          "port": "8000",
          "path": [
            "api",
            "projects",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get All Projects",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test(\"Response has name field\", function () {\r",
              "    const jsonData = pm.response.json();\r",
              "    pm.expect(pm.response.json()[0]).to.have.property('name')\r",
              "});\r",
              "pm.test(\"Response has id field\", function () {\r",
              "    const jsonData = pm.response.json();\r",
              "    pm.expect(pm.response.json()[0]).to.have.property('id')\r",
              "});\r",
              "pm.test(\"Response has description field\", function () {\r",
              "    const jsonData = pm.response.json();\r",
              "    pm.expect(pm.response.json()[0]).to.have.property('description')\r",
              "});\r",
              "\r",
              "pm.test(\"Response is an array\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json).to.be.an(\"array\");\r",
              "});\r",
              "\r",
              "pm.test(\"Array contains at least one project\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json.length).to.be.greaterThan(0);\r",
              "});\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://127.0.0.1:8000/api/projects/",
          "protocol": "http",
          "host": [
            "127",
            "0",
            "0",
            "1"
          ],
          "port": "8000",
          "path": [
            "api",
            "projects",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get All Projects by ID",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", () => {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test(\"Verify returned ID matches the created one\", () => {\r",
              "    const json = pm.response.json();\r",
              "    // Convert environment variable to Number to avoid type errors\r",
              "    const expectedId = Number(pm.environment.get(\"project_id\"));\r",
              "    pm.expect(json.id).to.eql(expectedId);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://127.0.0.1:8000/api/projects/{{project_id}}/",
          "protocol": "http",
          "host": [
            "127",
            "0",
            "0",
            "1"
          ],
          "port": "8000",
          "path": [
            "api",
            "projects",
            "{{project_id}}",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Update Project",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", () => {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test(\"Verify name was updated correctly\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json.name).to.eql(\"Updated Project\");\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\": \"Updated Project\",\r\n    \"description\": \"Updated Description\"\r\n}\r\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://127.0.0.1:8000/api/projects/{{project_id}}/",
          "protocol": "http",
          "host": [
            "127",
            "0",
            "0",
            "1"
          ],
          "port": "8000",
          "path": [
            "api",
            "projects",
            "{{project_id}}",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Update Project",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// 1. Validate if the server accepted the partial update\r",
              "pm.test(\"Status code is 200\", () => {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "// 2. Verify that only the description was updated while name remains the same\r",
              "pm.test(\"Verify partial update for description\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json.description).to.eql(\"Updated via PATCH\");\r",
              "    pm.expect(json.name).to.not.be.empty; \r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "PATCH",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\"description\": \"Updated via PATCH\"}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://127.0.0.1:8000/api/projects/{{project_id}}/",
          "protocol": "http",
          "host": [
            "127",
            "0",
            "0",
            "1"
          ],
          "port": "8000",
          "path": [
            "api",
            "projects",
            "{{project_id}}",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Update Project Copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 204 No Content\", () => {\r",
              "    pm.response.to.have.status(204);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "DELETE",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://127.0.0.1:8000/api/projects/{{project_id}}/",
          "protocol": "http",
          "host": [
            "127",
            "0",
            "0",
            "1"
          ],
          "port": "8000",
          "path": [
            "api",
            "projects",
            "{{project_id}}",
            ""
          ]
        }
      },
      "response": []
    }
  ]
}